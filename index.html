<!doctype html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A front-end template that helps you build fast, modern mobile web apps.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>bu, a build utility</title>

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="images/touch/chrome-touch-icon-192x192.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Web Starter Kit">
    <link rel="apple-touch-icon-precomposed" href="apple-touch-icon-precomposed.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
    <!--
    <link rel="canonical" href="http://www.example.com/">
    -->

    <!-- Page styles -->
    <link rel="stylesheet" href="styles/main.css">

    <style>
/* Generated by pandoc. */
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode, table.sourceCode pre
   { margin: 0; padding: 0; border: 0; vertical-align: baseline; border: none; }
td.lineNumbers { border-right: 1px solid #AAAAAA; text-align: right; color: #AAAAAA; padding-right: 5px; padding-left: 5px; }
td.sourceCode { padding-left: 5px; }
.sourceCode span.kw { color: #007020; font-weight: bold; }
.sourceCode span.dt { color: #902000; }
.sourceCode span.dv { color: #40a070; }
.sourceCode span.bn { color: #40a070; }
.sourceCode span.fl { color: #40a070; }
.sourceCode span.ch { color: #4070a0; }
.sourceCode span.st { color: #4070a0; }
.sourceCode span.co { color: #60a0b0; font-style: italic; }
.sourceCode span.ot { color: #007020; }
.sourceCode span.al { color: red; font-weight: bold; }
.sourceCode span.fu { color: #06287e; }
.sourceCode span.re { }
.sourceCode span.er { color: red; font-weight: bold; }

pre {
    position: relative;
}


pre .code-input {
  position: absolute;
  color: #909090;
  top: 0;
    right: 6px;
font-family: 'Roboto Condensed',Helvetica,Arial,sans-serif;
  }

    </style>
  </head>
  <body>
    <header class="app-bar promote-layer">
      <div class="app-bar-container">
        <button class="menu"><img src="images/hamburger.svg" alt="Menu"></button>
        <h1 class="logo"><strong>ùÑΩ bu</strong>ild utility</h1>
        <section class="app-bar-actions">
        <!-- Put App Bar Buttons Here -->
        <!-- e.g <button><i class="icon icon-star"></i></button> -->
        </section>
      </div>
    </header>

    <nav class="navdrawer-container promote-layer">
      <h4>Navigation</h4>


          <ul class="incremental">
    <li><a href="#targets">Targets</a></li>
    <li><a href="#variables">Variables</a></li>
    <li><a href="#questions">Questions</a></li>
    <li><a href="#imports">Imports</a></li>
    <li><a href="#comments">Comments</a></li>
    <li><a href="#prologue">Prologue</a></li>
    </ul>
          </nav>


<main>

<!--
<nav class="breadcrumbs">
  <p>
  <a class="breadcrumbs__link" href="/">bu</a> /
  <a class="breadcrumbs__link" href="#"></a>
  </p>
</nav>
-->





<p>Bu is a tool to help you run common tasks. It is something like a simple version of GNU make with some additional features. You define a set of tasks and it will run them. It features: <strong>targets with dependencies</strong>, <strong>script imports</strong>, <strong>using Bash or Python</strong>, <strong>task parallelism</strong>, <strong>command line inputs</strong>, and <strong>variables</strong>.</p>
<p>Here is a tiny example.</p>
<pre class="bu"><code>demo:
  echo Hello, world!</code></pre>
<pre class="bu-out"><code>I: bu, version 0.0, loading &quot;/tmp/tmpZnzeCd&quot;
I: &gt; [demo] !bash &quot;echo Hello, world!&quot;
Hello, world!
I: &lt; [demo] done 0
</code></pre>
<p>The target is executed with:</p>
<pre><code>$ bu demo</code></pre>
<h1 id="targets">Targets</h1>
<pre class="bu-spec"><code>&lt;target name&gt;: [dependencies...] [!type] 
  &lt;script body&gt;</code></pre>
<p>for example,</p>
<pre class="bu"><code>demo: build
  echo Hello, world!

build:
  echo a dependency</code></pre>
<pre class="bu-out"><code>I: bu, version 0.0, loading &quot;/tmp/tmpQp3cI2&quot;
I: &gt; [build] !bash &quot;echo a dependency&quot;
a dependency
I: &lt; [build] done 0
I: &gt; [demo] !bash &quot;echo Hello, world!&quot;
Hello, world!
I: &lt; [demo] done 0
</code></pre>
<p>is a target named <code>run</code> that depends on a target named <code>build</code> that runs the shell command <code>go run cmd/bu.go</code>.</p>
<h2 id="target-types">Target types</h2>
<p>Currently only shell and python are supported. Shell is the default, so no type is required to be passed explicitly. For a Python target, add the type.</p>
<pre class="bu"><code>demo: !py
  for i in range(5):
    print i</code></pre>
<pre class="bu-out"><code>I: bu, version 0.0, loading &quot;/tmp/tmpM10VZ0&quot;
I: &gt; [demo] !python &quot;for i in range(5):\n  print i&quot;
0
1
2
3
4
I: &lt; [demo] done 0
</code></pre>
<h2 id="redirects">Redirects</h2>
<p>Target output can be redirected to a file. This is useful when using shells that don't have redirection, like Python.</p>
<pre class="bu"><code>demo: &gt;my_file.txt !py
  print &quot;Save me in a file&quot;</code></pre>
<pre class="bu-out"><code>I: bu, version 0.0, loading &quot;/tmp/tmpuU_c80&quot;
I: &gt; [demo] !python &quot;print \&quot;Save me in a file\&quot;&quot;
I: &lt; [demo] done 0
</code></pre>
<p>Similarly a file can be used for input on standard input.</p>
<pre class="bu"><code>make: &gt;my_file.txt
  print &quot;Save me in a file&quot;

demo: &lt;my_file.txt !py
  import sys
  print sys.stdin.read()</code></pre>
<pre class="bu-out"><code>I: bu, version 0.0, loading &quot;/tmp/tmpl6D3eq&quot;
I: &gt; [demo] !python &quot;import sys\nprint sys.stdin.read()&quot;
Save me in a file

I: &lt; [demo] done 0
</code></pre>
<h2 id="file-dependencies">File Dependencies</h2>
<p>A target may explicitly depend on the existence of a file or directory.</p>
<pre class="bu"><code>make:
  echo Blah &gt; my_file.txt

demo: make ?my_file.txt
  cat my_file.txt
  rm my_file.txt</code></pre>
<pre class="bu-out"><code>I: bu, version 0.0, loading &quot;/tmp/tmp3chT1J&quot;
I: &gt; [make] !bash &quot;echo Blah &gt; my_file.txt&quot;
I: &lt; [make] done 0
I: &gt; [demo] !bash &quot;cat my_file.txt\nrm my_file.txt&quot;
Blah
I: &lt; [demo] done 0
</code></pre>
<h2 id="indentation">Indentation</h2>
<p>Target bodies must be indented by any whitespace, tab or space. Indentation must be consistent for Python scripts since Python is sensitive to this.</p>
<h1 id="variables">Variables</h1>
<p>Single line variables are defined with the <code>=</code> operator, like so:</p>
<pre class="bu"><code>DEMO =I am the variable content

demo:
  echo $DEMO</code></pre>
<pre class="bu-out"><code>I: bu, version 0.0, loading &quot;/tmp/tmpK854ek&quot;
I: &gt; [demo] !bash &quot;echo $DEMO&quot;
I am the variable content
I: &lt; [demo] done 0
</code></pre>
<p>Multiline variables are defined exactly the same way in a block.</p>
<pre class="bu"><code>DEMO =
    I
    am
    the variable
    content

demo:
  echo &quot;$DEMO&quot;</code></pre>
<pre class="bu-out"><code>I: bu, version 0.0, loading &quot;/tmp/tmpwOMnUc&quot;
I: &gt; [demo] !bash &quot;echo \&quot;$DEMO\&quot;&quot;
I
am
the variable
content
I: &lt; [demo] done 0
</code></pre>
<p>Defines a variable <code>myvariable</code>. Quoting is not required as the variable value is taken to the end of the line.</p>
<p>Variables are injected into the environment, where they can be used directly in targets as <code>$myvariable</code> in shell, or <code>os.getenv('myvariable')</code> from Python.</p>
<p>Note: Because variables are injected only into the environment, they will not be used in target names and dependencies.</p>
<h2 id="positional-arguments">Positional arguments</h2>
<p><code>$0</code>, <code>$1</code>, <code>$*</code>, <code>$@</code> etc (in shell) and <code>sys.args</code> (in Python) are available as additional arguments passed to the bu invocation. Consider this target:</p>
<pre class="bu"><code>demo:
  echo Hi, &quot;$0&quot;</code></pre>
<pre class="bu-out"><code>I: bu, version 0.0, loading &quot;/tmp/tmpnopzvg&quot;
I: &gt; [demo] !bash &quot;echo Hi, \&quot;$0\&quot;&quot;
Hi, demo
I: &lt; [demo] done 0
</code></pre>
<p>and this invocation:</p>
<pre><code>$ bu demo FirstArgument</code></pre>
<h1 id="questions">Questions</h1>
<pre class="bu"><code>danger ? n
  Are you sure? (y/n)

demo: danger
  if [ $danger -eq y ]; then
    echo Confirmed, continuing
  fi</code></pre>
<pre class="bu-out"><code>I: bu, version 0.0, loading &quot;/tmp/tmp8buOe7&quot;
I: &gt; [danger] question
[1mAre you sure? (y/n)[0m (default=[1m[34mn[0m[0m) &gt; E: &lt; [danger] fail EOF
I: &gt; [demo] !bash &quot;if [ $danger -eq y ]; then\n  echo Confirmed, continuing\nfi&quot;
demo: line 0: [: -eq: unary operator expected
I: &lt; [demo] done 0
</code></pre>
<p>Will prompt the user on the command line and store the value in the variable <code>confirm</code> with a default value of <code>n</code>. Questions are targets and can be depended on by other targets.</p>
<p>Default values are optional, with the syntax:</p>
<pre><code>&lt;name&gt; ? [default]
    &lt;question&gt;</code></pre>
<h1 id="imports">Imports</h1>
<pre><code>&lt; foo.bu</code></pre>
<p>Will import foo.bu from the system path, which defaults to resolving, in order:</p>
<ul class="incremental">
<li>Current working directory <code>.</code></li>
<li>Bu home directory <code>~/.bu</code></li>
</ul>
<h1 id="comments">Comments</h1>
<p>Line comments only. Non-line comments are undefined, especially in situations where values are taken to the end of a line, e.g. variable definitions</p>
<pre><code>myvariable = I am the value # this comment will be part of the value</code></pre>
<h2 id="differences-from-gnu-make">Differences from GNU make</h2>
<ul class="incremental">
<li>Each target is executed in the same shell</li>
<li>File existence is not explicitly taken to imply a dependency satisfaction</li>
</ul>
<h1 id="prologue">Prologue</h1>
<p>To you, designers and engineers of build systems, I present Bu.</p>
<p>For years I have suffered your hideous constructs, your crushing assumptions, and your bizarre choices. The only revenge left to me is to build one that is worse, more disgusting, and infinitely heavier with dripping abomination, so that you may suffer the pain that I have suffered. Feel the gut-wrenching taste of bile in my mouth. Feel it, and let it sour the flavor of your day, your week and your month. May it lay barren the fields of your productivity.</p>
<p><strong>To you, designers and engineers of build systems, I present Bu!</strong></p>

</main>

<footer>
</footer>

    <script src="scripts/main.js"></script>

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-XXXXX-X', 'auto');
      ga('send', 'pageview');
    </script>
    <!-- Built with love using Web Starter Kit -->
    <script>
      var texts = {
        "bu": "input for ùÑΩ bu demo",
        "bu-out": "output of ùÑΩ bu demo",
        "bu-spec": "ùÑΩ bu spec"
      };
      function inject(cls) {
        var snips = document.getElementsByClassName(cls);
        for (var i = 0; i < snips.length; i++) {
          var e = snips.item(i);
          var c = document.createElement("span");
          c.className = "code-input";
          c.innerText = texts[cls];
          e.appendChild(c);
        }
      }
      inject("bu");
      inject("bu-out");
      inject("bu-spec");
    </script>
  </body>
</html>
